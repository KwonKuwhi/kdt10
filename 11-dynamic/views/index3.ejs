<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>axios Post 실습</title>

    <!-- axios CDN -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        .success{
            color:blue;
            font-weight: 700;
        }
        .error{
            color:red;
            font-weight: 700;
        }
    </style>
</head>
<body>
    <form name="login">
    <input type="text" name="userId" id="userId" required>
    <br>
    <input type="password" name="userPw" id="userPw" required>
    <br>
    <button type="button" onclick="clickLogin()">로그인</button>
    </form>
    <div id="login-result"></div>
    

<script>
    const loginResult = document.querySelector('.login_result');

    function clickLogin(){
        const form = document.forms['login'];
        const data ={
            id: form.userId.value,
            pw: form.userPw.value
        }
        // form validation
        if(!form.userId.checkValidity()||!form.userPW.checkValidity()){
            loginResult.textContent = '아이디와 패스워드는 필수값입니다!';
            return;
        }

        axios({
            method: 'post',
            url: '/axios2',
            data: data
        }).then((response)=>{
            console.log(response.data);

            if(response.data.isSuccess){
                //로그인 성공
                loginResult.textContent = `${response.data.userInfo.userId}님! 로그인 성공`;
                loginResult.classList.remove('error');
                loginResult.classList.add('success');

            }else{
                loginResult.textContent = `아이디 또는 패스워드가 잘못됐습니다!`;
                loginResult.classList.remove('success');
                loginResult.classList.add('error');
            }
            
        })

    }



    
</script>
    
</body>
</html>